# Architecture

## File System Index

Creation is `O(n)`.

The index is constructed in a temporary cache directory with the following structure:

```shell
.tif
-- evaluations
---- b5bb9d8014a0f9b1d61e21e796d78dccdf1352f23cd32812f4850b878ae4944c
------ diff
------ merge
------ options
-------- ordered=false
------ patch
------ paths
-------- 5e8795220577c20ce4937325810144c4b6950212e5bf0a93678e36161e96212a
---------- columns
------------ unordered
-------------- 0
---------------- checksum
---------------- name
------------------ name
---------------- types
------------------ union
-------------------- VARCHAR
------------------ checksum
-------------- 1
---------------- checksum
---------------- name
------------------ age
---------------- types
------------------ union
-------------------- INTEGER
------------------ checksum
-------------- 2
---------------- checksum
---------------- name
------------------ location
---------------- types
------------------ union
-------------------- VARCHAR
------------------ checksum
---------- meta
------------ checksum
-------------- d397c0960747a995e718a5cd944b65fe06a97a3e9d3db91cf5f07b9f8cb6a86a
------------ stats
-------------- checksum
---------------- 683f60ad04b3d385cce1a6c69680f4fcba47720e6623cc373ab5f1f36e4a9cef
-------------- ctime
-------------- inode
-------------- mtime
-------------- size
---------- records
------------ checksums
-------------- unordered
---------------- 1e5d63640d8a6bd12fd708a3fee22d018c0c4b9610e05870ec608eeaff3b015a
------------------ 2
---------------- 9788079cf3dc8b48af6eb0088fc69da91050f373ec17c094c1e8cb549b62e812
------------------ 0
---------------- 4323c8f93c990740ba35ff456ef5d468d59643d89891bcf315dca021851d098d
------------------ 1
------------ offsets
-------------- 0
---------------- columns
------------------ unordered
-------------------- 0
---------------------- literal
------------------------ checksum
---------------------- logical
------------------------ checksum
---------------------- physical
------------------------ checksum
-------------------- 1
---------------------- literal
------------------------ checksum
---------------------- logical
------------------------ checksum
---------------------- physical
------------------------ checksum
-------------------- 2
---------------------- literal
------------------------ checksum
---------------------- logical
------------------------ checksum
---------------------- physical
------------------------ checksum
-------------- 1
---------------- columns
------------------ unordered
-------------------- 0
---------------------- literal
------------------------ checksum
---------------------- logical
------------------------ checksum
---------------------- physical
------------------------ checksum
-------------------- 1
---------------------- literal
------------------------ checksum
---------------------- logical
------------------------ checksum
---------------------- physical
------------------------ checksum
-------------------- 2
---------------------- literal
------------------------ checksum
---------------------- logical
------------------------ checksum
---------------------- physical
------------------------ checksum
-------------- 2
---------------- columns
------------------ unordered
-------------------- 0
---------------------- literal
------------------------ checksum
---------------------- logical
------------------------ checksum
---------------------- physical
------------------------ checksum
-------------------- 1
---------------------- literal
------------------------ checksum
---------------------- logical
------------------------ checksum
---------------------- physical
------------------------ checksum
-------------------- 2
---------------------- literal
------------------------ checksum
---------------------- logical
------------------------ checksum
---------------------- physical
------------------------ checksum
-------- d353207d046e4da620ddd6b795ec5a847ccd00303608c91d19db741420a45872
---------- columns
------------ unordered
-------------- 0
---------------- checksum
---------------- name
------------------ name
---------------- types
------------------ union
-------------------- VARCHAR
------------------ checksum
-------------- 1
---------------- checksum
---------------- name
------------------ age
---------------- types
------------------ union
-------------------- INTEGER
------------------ checksum
-------------- 2
---------------- checksum
---------------- name
------------------ location
---------------- types
------------------ union
-------------------- VARCHAR
------------------ checksum
---------- meta
------------ checksum
-------------- d397c0960747a995e718a5cd944b65fe06a97a3e9d3db91cf5f07b9f8cb6a86a
------------ stats
-------------- checksum
---------------- 1192ba8f2a7b6b231451aa13f53071d5e14be2e58ad205226d1bf92cb05a4675
-------------- ctime
-------------- inode
-------------- mtime
-------------- size
---------- records
------------ checksums
-------------- unordered
---------------- 1e5d63640d8a6bd12fd708a3fee22d018c0c4b9610e05870ec608eeaff3b015a
------------------ 2
---------------- 9788079cf3dc8b48af6eb0088fc69da91050f373ec17c094c1e8cb549b62e812
------------------ 0
---------------- 4323c8f93c990740ba35ff456ef5d468d59643d89891bcf315dca021851d098d
------------------ 1
------------ offsets
-------------- 0
---------------- ...
---------------- ...
---------------- ...
-------------- 1
---------------- ...
---------------- ...
---------------- ...
-------------- 2
---------------- ...
---------------- ...
---------------- ...
------ result
---- 7d865e959b2466918c9863afca942d0fb89d7c9ac0c99bafc3749504ded97730
------ diff
------ merge
------ options
-------- ordered=false
------ patch
------ paths
-------- 7cf518c2c17f30d6d1f25b1bb196362f1416dcbdd583ad9f129a021554df5ada
---------- ...
---------- ...
---------- ...
-------- 54d732161b8cc72bf94fbb332909bd173cefd09528fc7276349b820a308fe190
---------- ...
---------- ...
---------- ...
---- result
-- ...
-- ...
-- ...
-- index
---- columns
------ literal
-------- 4c10639328bf203e643e289017a555a8d91caebf129ea9ec607e45b59c9a668e
-------- b8c4fc794dc98915b725da46a8b84c186b85fd357d136760c70bd0f9b36e273b
-------- ...
-------- ...
-------- ...
------ logical
-------- ...
-------- ...
-------- ...
------ physical
-------- ...
-------- ...
-------- ...
---- paths
------ 683f60ad04b3d385cce1a6c69680f4fcba47720e6623cc373ab5f1f36e4a9cef -> ../../evaluations/b5bb9d8014a0f9b1d61e21e796d78dccdf1352f23cd32812f4850b878ae4944c/paths/5e8795220577c20ce4937325810144c4b6950212e5bf0a93678e36161e96212a
------ 1192ba8f2a7b6b231451aa13f53071d5e14be2e58ad205226d1bf92cb05a4675 -> ../../evaluations/b5bb9d8014a0f9b1d61e21e796d78dccdf1352f23cd32812f4850b878ae4944c/paths/d353207d046e4da620ddd6b795ec5a847ccd00303608c91d19db741420a45872
```

## Literal Layer

TODO...

## Logical Layer

TODO...

## Physical Layer

TODO...
